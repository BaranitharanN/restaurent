<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Menu Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    header {
      background-color: #343a40;
      color: white;
      padding: 15px;
      text-align: center;
    }
    footer {
      background-color: #343a40;
      color: white;
      padding: 10px;
      text-align: center;
      position: fixed;
      bottom: 0;
      width: 100%;
    }
    .menu-item {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: pointer;
      background-color: white;
    }
    .menu-item:hover {
      background-color: #f1f1f1;
    }
    .order-options {
      margin-top: 10px;
      display: none;
    }
    .selected {
      border-color: #28a745;
      background-color: #e6ffe6;
    }
  </style>
</head>
<body>

  <!-- ‚úÖ Header -->
  <header>
    <h2>üçΩÔ∏è Restaurant POS System</h2>
    <p>Welcome to the Menu Page</p>
  </header>

  <div class="container py-4" style="margin-bottom: 80px;">
    <h4 class="mb-4">Select Items to Place an Order</h4>

    <!-- ‚úÖ Menu Items -->
    <div id="menu-list">
      <!-- üçî Burger -->
      <div class="menu-item" data-item="Burger" onclick="showOrderOptions(this)">
        <h5>Burger</h5>
        <div class="order-options">
          <select class="table-select form-select mb-2" onclick="event.stopPropagation()">
            <option value="">Select Table</option>
            <option value="T1">T1</option>
            <option value="T2">T2</option>
            <option value="T3">T3</option>
          </select>

          <div class="input-group mb-2" style="max-width: 120px;" onclick="event.stopPropagation()">
            <button class="btn btn-outline-secondary" type="button" onclick="event.stopPropagation(); decreaseQuantity(this)">‚àí</button>
            <input type="text" class="form-control text-center quantity-input" value="1" readonly onclick="event.stopPropagation()">
            <button class="btn btn-outline-secondary" type="button" onclick="event.stopPropagation(); increaseQuantity(this)">+</button>
          </div>

          <button class="btn btn-success btn-sm" onclick="event.stopPropagation(); addToOrder(this)">Add</button>
        </div>
      </div>

      <!-- üçï Pizza -->
      <div class="menu-item" data-item="Pizza" onclick="showOrderOptions(this)">
        <h5>Pizza</h5>
        <div class="order-options">
          <select class="table-select form-select mb-2" onclick="event.stopPropagation()">
            <option value="">Select Table</option>
            <option value="T1">T1</option>
            <option value="T2">T2</option>
            <option value="T3">T3</option>
          </select>

          <div class="input-group mb-2" style="max-width: 120px;" onclick="event.stopPropagation()">
            <button class="btn btn-outline-secondary" type="button" onclick="event.stopPropagation(); decreaseQuantity(this)">‚àí</button>
            <input type="text" class="form-control text-center quantity-input" value="1" readonly onclick="event.stopPropagation()">
            <button class="btn btn-outline-secondary" type="button" onclick="event.stopPropagation(); increaseQuantity(this)">+</button>
          </div>

          <button class="btn btn-success btn-sm" onclick="event.stopPropagation(); addToOrder(this)">Add</button>
        </div>
      </div>

      <!-- üçù Pasta -->
      <div class="menu-item" data-item="Pasta" onclick="showOrderOptions(this)">
        <h5>Pasta</h5>
        <div class="order-options">
          <select class="table-select form-select mb-2" onclick="event.stopPropagation()">
            <option value="">Select Table</option>
            <option value="T1">T1</option>
            <option value="T2">T2</option>
            <option value="T3">T3</option>
          </select>

          <div class="input-group mb-2" style="max-width: 120px;" onclick="event.stopPropagation()">
            <button class="btn btn-outline-secondary" type="button" onclick="event.stopPropagation(); decreaseQuantity(this)">‚àí</button>
            <input type="text" class="form-control text-center quantity-input" value="1" readonly onclick="event.stopPropagation()">
            <button class="btn btn-outline-secondary" type="button" onclick="event.stopPropagation(); increaseQuantity(this)">+</button>
          </div>

          <button class="btn btn-success btn-sm" onclick="event.stopPropagation(); addToOrder(this)">Add</button>
        </div>
      </div>
    </div>

    <!-- ‚úÖ Place Order Button -->
    <div class="text-center mt-4">
      <button class="btn btn-primary" onclick="placeOrder()">Place Order</button>
    </div>
  </div>

  <!-- ‚úÖ Footer -->
  <footer>
    &copy; 2025 Baranitharan N | Vel Tech Multitech | POS System
  </footer>

  <!-- ‚úÖ JavaScript -->
  <script>
  const selectedItems = [];

  function showOrderOptions(el) {
    const options = el.querySelector(".order-options");
    options.style.display = options.style.display === "none" ? "block" : "none";
  }

  function increaseQuantity(button) {
    const input = button.parentElement.querySelector(".quantity-input");
    let value = parseInt(input.value);
    input.value = value + 1;
  }

  function decreaseQuantity(button) {
    const input = button.parentElement.querySelector(".quantity-input");
    let value = parseInt(input.value);
    if (value > 1) {
      input.value = value - 1;
    }
  }

  function addToOrder(button) {
    const container = button.closest(".menu-item");
    const itemName = container.getAttribute("data-item")?.trim();
    const tableSelect = container.querySelector(".table-select");
    const quantityInput = container.querySelector(".quantity-input");

    const table = tableSelect?.value?.trim();
    const quantity = quantityInput?.value?.trim();

    if (!itemName || !table || !quantity) {
      return; // silently fail if any field is missing
    }

    selectedItems.push({
      name: itemName,
      table: table,
      quantity: quantity
    });

    container.classList.add("selected");
    container.querySelector(".order-options").style.display = "none";
  }

  function placeOrder() {
    if (selectedItems.length === 0) {
      alert("No items selected.");
      return;
    }

    const newOrder = {
      id: Date.now(),
      cashier: "John",
      items: selectedItems,
      time: new Date().toLocaleString()
    };

    const existingOrders = JSON.parse(localStorage.getItem("orders")) || [];
    existingOrders.push(newOrder);
    localStorage.setItem("orders", JSON.stringify(existingOrders));

    window.location.href = "orders.html";
  }
</script>
</body>
</html>